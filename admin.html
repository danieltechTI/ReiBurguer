<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel Admin - ReiBurguer</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <h1><a href="index.html" style="text-decoration: none; color: var(--primary);">üçî ReiBurguer</a></h1>
                </div>
                <button class="btn-auth" onclick="sairAdmin()">Sair</button>
            </div>
        </div>
    </header>

    <section class="admin">
        <div class="container">
            <h1>Painel de Gerenciamento</h1>
            
            <div class="filtro-status">
                <button class="filter-btn active" onclick="filtrarStatus('todos')">Todos</button>
                <button class="filter-btn" onclick="filtrarStatus('confirmado')">Confirmados</button>
                <button class="filter-btn" onclick="filtrarStatus('preparando')">Preparando</button>
                <button class="filter-btn" onclick="filtrarStatus('pronto')">Pronto</button>
                <button class="filter-btn" onclick="filtrarStatus('finalizado')">Finalizado</button>
            </div>

            <div class="pedidos-list" id="pedidos-list"></div>
        </div>
    </section>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 ReiBurguer Admin. Todos os direitos reservados.</p>
        </div>
    </footer>

    <style>
        .admin {
            padding: 40px 20px;
            min-height: 80vh;
        }

        .admin h1 {
            text-align: center;
            margin-bottom: 30px;
            color: var(--dark);
        }

        .filtro-status {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 30px;
        }

        .pedidos-list {
            display: grid;
            gap: 20px;
        }

        .pedido-card {
            background: white;
            border: 2px solid var(--border);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .pedido-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border);
        }

        .pedido-numero {
            font-size: 20px;
            font-weight: bold;
            color: var(--primary);
        }

        .pedido-status {
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 12px;
        }

        .status-confirmado { background-color: #ffd700; color: #333; }
        .status-preparando { background-color: #ff9800; color: white; }
        .status-pronto { background-color: #4caf50; color: white; }
        .status-finalizado { background-color: #2196f3; color: white; }

        .pedido-info {
            margin-bottom: 15px;
        }

        .pedido-info-row {
            display: flex;
            justify-content: space-between;
            margin: 5px 0;
        }

        .pedido-items {
            background-color: var(--light);
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }

        .pedido-buttons {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .btn-status {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            color: white;
        }

        .btn-status:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-preparando { background-color: #ff9800; }
        .btn-pronto { background-color: #4caf50; }
        .btn-finalizado { background-color: #2196f3; }
    </style>

    <script src="app.js"></script>
    <script>
        // Simular autentica√ß√£o admin
        if (!localStorage.getItem('adminLogado')) {
            const senha = prompt('Digite a senha do admin:');
            if (senha === 'admin123') {
                localStorage.setItem('adminLogado', 'true');
            } else {
                alert('Senha incorreta!');
                window.location.href = 'index.html';
            }
        }

        let statusFiltro = 'todos';

        function filtrarStatus(status) {
            statusFiltro = status;
            document.querySelectorAll('.filtro-status .filter-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            renderizarPedidos();
        }

        function renderizarPedidos() {
            const pedidosList = document.getElementById('pedidos-list');
            let pedidos = JSON.parse(localStorage.getItem('pedidos')) || [];
            
            if (statusFiltro !== 'todos') {
                pedidos = pedidos.filter(p => p.status === statusFiltro);
            }

            if (pedidos.length === 0) {
                pedidosList.innerHTML = '<p style="text-align: center;">Nenhum pedido encontrado</p>';
                return;
            }

            pedidosList.innerHTML = pedidos.map(pedido => `
                <div class="pedido-card">
                    <div class="pedido-header">
                        <div class="pedido-numero">Pedido #${pedido.numero}</div>
                        <span class="pedido-status status-${pedido.status}">${pedido.status.toUpperCase()}</span>
                    </div>
                    <div class="pedido-info">
                        <div class="pedido-info-row">
                            <strong>Cliente:</strong> ${pedido.cliente}
                        </div>
                        <div class="pedido-info-row">
                            <strong>Telefone:</strong> ${pedido.telefone}
                        </div>
                        <div class="pedido-info-row">
                            <strong>Pagamento:</strong> ${pedido.pagamento}
                        </div>
                        <div class="pedido-info-row">
                            <strong>Data:</strong> ${pedido.data}
                        </div>
                    </div>
                    <div class="pedido-items">
                        <strong>Itens:</strong><br>
                        ${pedido.itens.map(i => `${i.emoji} ${i.nome} x${i.quantidade}`).join('<br>')}
                    </div>
                    <div class="pedido-info-row">
                        <strong>Total:</strong> R$ ${pedido.total.toFixed(2)}
                    </div>
                    ${pedido.observacoes ? `<div><strong>Observa√ß√µes:</strong> ${pedido.observacoes}</div>` : ''}
                    <div class="pedido-buttons">
                        ${getProximoStatusBotao(pedido.numero, pedido.status)}
                    </div>
                </div>
            `).join('');
        }

        function getProximoStatusBotao(numero, status) {
            const statusSequencia = ['confirmado', 'preparando', 'pronto', 'finalizado'];
            const index = statusSequencia.indexOf(status);
            
            if (index === -1 || index === 3) return ''; // Finalizado n√£o tem pr√≥ximo status

            const proximosStatus = [
                { label: '‚Üí Preparando', status: 'preparando', classe: 'btn-preparando' },
                { label: '‚Üí Pronto', status: 'pronto', classe: 'btn-pronto' },
                { label: '‚Üí Finalizado', status: 'finalizado', classe: 'btn-finalizado' }
            ];

            return proximosStatus.slice(index).map(s => 
                `<button class="btn-status ${s.classe}" onclick="atualizarStatus('${numero}', '${s.status}')">${s.label}</button>`
            ).join('');
        }

        function atualizarStatus(numero, novoStatus) {
            let pedidos = JSON.parse(localStorage.getItem('pedidos')) || [];
            const pedido = pedidos.find(p => p.numero === numero);
            
            if (pedido) {
                pedido.status = novoStatus;
                localStorage.setItem('pedidos', JSON.stringify(pedidos));
                
                // Simular envio de mensagem WhatsApp
                const mensagens = {
                    'preparando': `Pedido #${numero} - Seu pedido est√° sendo preparado com carinho. Fique ligado!`,
                    'pronto': `Pedido #${numero} - Seu pedido est√° PRONTO! Venha retirar em: R. Ant√¥nio Giarola, 30`,
                    'finalizado': `Pedido #${numero} - Obrigado por sua compra! Volte sempre ao ReiBurguer!`
                };
                
                console.log('WhatsApp Demo:', mensagens[novoStatus]);
                alert(`Mensagem enviada para ${pedido.telefone}:\n\n${mensagens[novoStatus]}`);
                renderizarPedidos();
            }
        }

        function sairAdmin() {
            localStorage.removeItem('adminLogado');
            window.location.href = 'index.html';
        }

        document.addEventListener('DOMContentLoaded', () => {
            renderizarPedidos();
            // Atualizar a cada 5 segundos
            setInterval(renderizarPedidos, 5000);
        });
    </script>
</body>
</html>
